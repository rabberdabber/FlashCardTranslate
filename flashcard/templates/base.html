<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="refresh" content="60">
      <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"> 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-social/5.1.1/bootstrap-social.min.css"> 
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Nova+Flat" >
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css">

    <title>Todo App</title>
    <style>
      .hidden {
        display: none;
      }
      ul {
        list-style: none;
        pagination-style: none;
        padding-left: 0;
        width: 200px;
      }
      li {
        clear: both;
      }
      
      .todo-pagination {
        margin-top: 20px;
      }

      h1,p { 
        font-family: "Nova Flat";
      }

      li button {
        -webkit-appearance: none;
        border: none;
        outline: none;
        color: red;
        float: right;
        cursor: pointer;
        font-size: 16px;
      }
      .lists-wrapper {
        display: inline-block;
        vertical-align: top;
      }
      .paginations-wrapper, .pagination-wrapper {
        display: inline-block;
        vertical-align: top;
      }
      .row-header {
        margin: 0px auto;
        padding: 0px auto;
      }
      table {
        border: 1px solid #ddd;
        border-color: black;
      }

      .row-content {
          margin: 0px auto;
          border-bottom: 1px ridge;
          border-bottom-color: black;
      }

      header {
        background-color: #f1f1f1;
        padding: 20px;
        text-align: right;
      }

      .footer {
          /*position: absolute;
          bottom: 0;
          width: 100%;
          height: 30px;*/
          margin: 0px auto;
          border-top: 1px ridge;
          border-top-color: black;
          background-color: #d1c4E9; 
          height: 30px;
      }

      .jumbotron {
          color: black;
          background: #d1c4E9;
          margin: 0px auto;
          border-bottom : 1px ridge;
          border-bottom-color: black;
      }

      .address {
          font-size: 80%;
          margin: 0px;
          color: #0f0f0f;
      }

      body {
          padding:  0px 0px 0px 0px;
          z-index: 0;
          background-color: #d1c4E9;
      }

      .navbar-dark{
          background-color: #32064A;
          border-bottom: 1px ridge;
          border-bottom-color: black;
      }

      form {
        background-color: #d1c4E9;
      }

      .navbar-nav > li {
        margin-left: 30px;
        margin-right: 30px;
      }
      
      .front, .back {
        width:100%;
        min-height:300px;
        display: table;
      }

      .front h3, .back p {
        display: table-cell;
        vertical-align: middle;
        text-align: center;
      }

      .fast {
        animation-duration: .5s;
      }
      .flashcard {
        /*border: 1px solid black;
        border-color: black;*/
       /* cursor:pointer;*/
        width: 25%;
      }


    </style>
  </head>
  <body>
   
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> 
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script> 
    <script src="https://code.iconify.design/2/2.2.1/iconify.min.js"></script>
  
    <!-- NAVIGATION BAR-->
     <nav class="navbar navbar-dark navbar-expand-sm fixed-to">
        <div class="container">
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#Navbar">
                <span class="navbar-toggler-icon"> </span>
            </button>
            <a class="navbar-brand mr-auto" href="#">FlashCards </a>
            <span class="iconify" data-icon="fluent:stack-24-filled"> </span>
            <div class="collapse navbar-collapse" id="Navbar">
      
              {%block navigator%}
              <ul class="navbar-nav mr-auto">
                <li class="nav-item active"><a class="nav-link" href="#"><span class="fa fa-home fa-lg"> </span><small>Home</small></a></li>
                <li class="nav-item"><a class="nav-link" href="../contact.html"><span class="fa fa-info fa-lg"></span><small> Contact</small></a></li>
              </ul>
              <ul class="navbar-nav ml-auto"> 
                <li class="nav-item"><a class="nav-link" href="#"><span class="fa fa-sign-in fa-lg"></span><small>Login</small></a></li>
                <li class="nav-item"><a class="nav-link" href="#"><span class="fa fa-user-plus fa-lg"></span><small>SignUp</small></a></li>
              </ul>
              {%endblock%}

              
            </div>

        </div>

    </nav>

  
    <script>
      $('.navbar-nav').on('click','li', function(){
        $(this).addClass('active').siblings().removeClass('active');
      });
    </script>

   
      {% block content %}
        <header class="jumbotron">
            <div class="container">
                <div class="row row-header">
                    <div class="col-12 col-sm-6 text-center">
                        <h1>Language FlashCards</h1>
                        <p> Add language Categories and press the link to view flashcards</p>
                    <div class="col-12 col-sm">
                </div>
            </div>
        </header>
        
        <br>
        {% if error %}
          <p class="error text-center"> <strong> Error: </strong> {{ error }} </p>
        {% endif %}
        <div class="container">
          <div class="row lists-wrapper">
            <label for="source-language target-language"> <p>Add/Search/Delete Source to Target Language Category<p></label>
             <form action="lists/create" method="POST" id="source-language"> 
             <!-- <div class="col-12 float-left">
                  <select class="form-control" name="source-language">
                    <option value="" selected disabled>Select a source language</option>
                    <option value="en" selected>English</option>
                    <option value="es">Spanish</option>
                    <option value="fr">French</option>
                    <option value="de">German</option>
                    <option value="it">Italian</option>
                    <option value="zh"> Simplified Chinese </option>
                    <option value="ja">Japanese</option>
                    <option value="ko">Korean</option>
                    <option value="in">Indonesian</option>
                    <option value="ru">Russian</option>
                    <option value="th">Thai</option>
                    <option value="vi">Vietnamese</option>
                    <option value="zh-CHT">Traditional Chinese</option>
                  </select>
              </div>-->
              <div class="form-group">
                {{form.csrf_token}}
                <label for="source-language">Source:</label>
                {{form.source(class="form-control")}}
                {% if form.source.errors %}
                  <ul class="errors">
                      {% for error in form.source.errors %}
                          <li style="color: red;" class="text-center">{{ error }}</li>
                      {% endfor %}
                  </ul>
                {% endif %}
              </div>
        
              <div class="col-12 text-center">
                <i class="fa fa-arrow-circle-down fa-lg"></i>
              </div>
             <!-- <div class="col-12 float-left">
                  <select class="form-control" name="target-language">
                    <option value="" selected disabled>Select a target language</option>
                    <option value="en">English</option>
                    <option value="es">Spanish</option>
                    <option value="fr">French</option>ele
                    <option value="de">German</option>
                    <option value="it">Italian</option>
                    <option value="zh"> Simplified Chinese </option>
                    <option value="ja">Japanese</option>
                    <option value="ko" selected>Korean</option>
                    <option value="in">Indonesian</option>
                    <option value="ru">Russian</option>
                    <option value="th">Thai</option>
                    <option value="vi">Vietnamese</option>
                    <option value="zh-CHT">Traditional Chinese</option>
                  </select>
              </div>-->
               <div class="form-group">
                <label for="target-language">Target:</label>
                {{form.target(class="form-control")}}
              </div>

              <div class="form-group col-12 text-right">
                <i class="fa-solid fa-plus fa-lg"></i>
                {{form.add(class="btn btn-success")}}
                 <i class="fa-solid fa-magnifying-glass fa-lg"></i>
                {{form.search(class="btn btn-success")}}
                <i class="fa-solid fa-trash-can fa-lg"></i>
                {{form.delete(class="btn btn-success")}}
              </div>
              
             <!-- <div class="row">
                <div class="col-12 text-right"> 
                
                  <i class="fa-solid fa-plus fa-lg"></i>
                  <input type="submit" value="Add" name="Add" class="btn btn-success">

                    
                  <i class="fa-solid fa-magnifying-glass fa-lg"></i>
                  <input type="submit" value="Search" name="Search" class="btn btn-success">

                  <i class="fa-solid fa-trash-can fa-lg"></i>
                  <input type="submit" value="Delete" name="Delete" class="btn btn-success">
                </div>
              </div>-->
              
              
            </form>
          </div>
        </div>

        <br>
        <div class="container">
          <div class="row">
            <table class="w-100">
              <tr class="text-center">
                <th> Id </th>
                <th> Language Category</th>
                <th> Link to Cards </th>
                <th> Delete Category </th>
              </tr>
               {% for i in range(lists|length)%}
              <tr class="clickable text-center">
                <td> {{i+1}} </td>
                <td><p>{{lists[i].name}}</p> </td>
                <td><a href="{{url_for('crud.view',id=lists[i].id)}}" class="btn btn-primary">Link <i class="fa-solid fa-arrow-up-right-from-square fa-lg"></i></a></td>
                <td> <a class="btn btn-danger delete-list" data-id={{lists[i].id}}>Delete <i class="fa-solid fa-trash-can fa-lg"></i></a></td>
              </tr>
              {% endfor %}
            </table>

      </div>
    </div>


      
        <script>
         
          deleteListBtns = document.querySelectorAll(".delete-list");

          for (let i = 0; i < deleteListBtns.length; i++) {
            const deleteBtn = deleteListBtns[i];
            deleteBtn.onclick = function(e) {
              console.log("Delete event: ", e);
              const listId = e.target.dataset.id;

              fetch('lists/'+ listId + '/delete',{
                method: 'DELETE'
              }).then(function() {
                const item = e.target.parentElement.parentElement;
                item.remove();
                  document.getElementById("error").className = "hidden";
                  window.location.reload(true);
                })
                .catch(function(e) {
                  console.error(e);
                  document.getElementById("error").className = "";
                });
            };
          }
        </script>
       
      {% endblock %}
      <br> 
      {% if pagination %}
        <!-- Pagination Links-->
        <div class="text-center">
            <a href="{{ url_for('crud.list', page=pagination.prev_num) }}"
              class="btn btn-outline-dark 
              {% if pagination.page == 1 or pagination.pages == 0  %}disabled{% endif %}">
                &laquo;
            </a>
        <!-- Loop through the number of pages to display a link for each-->
          {% for page_num in pagination.iter_pages(left_edge=1, right_edge=1, left_current=1, right_current=2) %}
            {% if page_num %}
        <!-- Check for the active page and set the link to "Active"-->
                    {% if pagination.page == page_num %}
                    <a href="{{ url_for('crud.list', page=page_num) }}"
                      class="btn btn-dark">
                        {{ page_num }}
                    </a>
                    {% else %}
                    <a href="{{ url_for('crud.list', page=page_num) }}"
                      class="btn btn-outline-dark">
                        {{ page_num }}
                    </a>
                    {% endif %}
                {% else %}
                    ...
                {% endif %}
            {% endfor %}
            <a href="{{ url_for('crud.list', page=pagination.next_num) }}"
              class="btn btn-outline-dark 
              {% if pagination.page == pagination.pages or pagination.pages == 0 %}disabled{% endif %}">
                &raquo;
            </a>
        </div>
        {% if pagination.pages > 0%}
        <p class="text-center mt-3">
          Showing page {{ pagination.page }} of {{ pagination.pages }}
        </p>
        {% endif %}
      {% endif %}
            
        <br>
        <br>

      
    </div>

     <footer class="footer">
       <br>
        <div class="container">
            <div class="row">             
                <div class="col-12 col-sm-4 align-self-center">
                    <div class="text-center">
                        <a class="btn btn-social-icon btn-linkedin" href="http://www.linkedin.com/in/bereket-assefa-251a79178/"><i class="fa-brands fa-linkedin fa-lg"></i></a>
                        <a class="btn btn-social-icon btn-google" href="http://youtube.com//channel/UCY9ko_oY6TA9WIVz_symvqA"><i class="fa-brands fa-youtube fa-lg"></i></a>
                        <a class="btn btn-social-icon btn-twitter" href="mailto:bereket@kakao.com"><i class="fa-solid fa-envelope fa-lg"></i></a>
                    </div>
                </div>

                <div class="col-12 text-center">             
                  <div class="col-auto">
                      <p>© Copyright 2022 rabberdabber</p>
                      <a> FlashCards<span class="iconify" data-icon="fluent:stack-24-filled"></span></a>
                     
                  </div>
                </div>
            </div>
        </div>
         
    </footer>
    <script src="{{url_for('static',filename='script.js')}}"></script>
  </body>
</html>
