{% extends "base.html" %}
{% block navigator%}
   
    <ul class="navbar-nav mr-auto">
        <li class="nav-item active"><a class="nav-link" href="/"><span class="fa fa-home fa-lg"> </span><small>Home</small></a></li>
        <li class="nav-item"><a class="nav-link" href="../../contact.html"><span class="fa fa-info fa-lg"></span><small> Contact</small></a></li>
    </ul>
    <ul class="navbar-nav ml-auto"> 
        <li class="nav-item"><a class="nav-link" href="#"><span class="fa fa-sign-in fa-lg"></span><small>Login</small></a></li>
        <li class="nav-item"><a class="nav-link" href="#"><span class="fa fa-user-plus fa-lg"></span><small>SignUp</small></a></li>
    </ul>
{% endblock %}

{% block content %}
     <header class="jumbotron">
            <div class="container">
                <div class="row row-header">
                    <div class="col-12 col-sm-6 text-center">
                        <h1>{{active_list.name}} Language FlashCards</h1>
                        <p> Click any Card to view the translated word</p>
                    <div class="col-12 col-sm">
                </div>
            </div>
    </header>
    <br>
    <div class="container">
        <div class="row row-header">

            {% block crumbs%}
            <ol class="col-12 breadcrumb">
                <li class="breadcrumb-item"><a href="/">Home</a></li>
                <li class="breadcrumb-item active">Cards</li>

            </ol>
            {% endblock%}

            <label for="word-form"> <p>Add/Search word<p></label>
            <form action="/todos/create/{{active_list.id}}" method="POST" id="todo-form" name="word-form">
                    
                    <div class="row">
                        <div class="col-12  float-left">
                            <div class="form-check">
                                <input type="text" class="form-control" id="word" name="word" placeholder="word"> 
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-12 text-right"> 
                        
                            <i class="fa-solid fa-plus fa-lg"></i>
                            <input type="submit" value="Add" name="word" class="btn btn-success">

                            <i class="fa-solid fa-magnifying-glass fa-lg"></i>
                            <input type="submit" value="Search" name="search-word" class="btn btn-success">
                        </div>
                    </div>
                    
            </form>
 
        </div>
    </div>   
    <br>         
        <div class="container">
        {% for i in range(2)%}
            <div class="row">
                {% for j in range(4) %}
                {% if (lists|length) > (j + (i * 4)) %}
                    <div class="flashcard">
                    <button class="delete-todo" data-id="{{ lists[j + (i * 4)].id }}">&cross;</button>
                    <div class="p-3 front border">
                        <h3>{{lists[j + (i * 4)].word}}</h3>
                    </div>
                    <div class="p-3 back border">
                        <p>{{lists[j + (i * 4)].word_translation}}</p>
                    </div>
                    </div>

                {% else%}
                    <div class="flashcard hidden">
                    <button>&cross;</button>
                    <div class="p-3 front border">
                        <h3></h3>
                    </div>
                    <div class="p-3 back border">
                        <p></p>
                    </div>
                    </div>

                {% endif%}
                
                {%endfor%}
                </div>
        {%endfor%}
        </div>

        <br>
        <br>
        <script>
          deleteBtns = document.querySelectorAll(".delete-todo");
          for (let i = 0; i < deleteBtns.length; i++) {
            const deleteBtn = deleteBtns[i];
            deleteBtn.onclick = function(e) {
              console.log("Delete event: ", e);
              const todoId = e.target.dataset.id;
              fetch('/todos/'+ todoId + '/delete',{
                method: 'DELETE'
              })
              .then(function() {
                var url = '/todos/list/{{active_list.id}}?page=1';
                if (deleteBtns.length > 1){
                  url = '/todos/list/{{active_list.id}}?page={{ pagination.page }}';
                }
                else if({{ pagination.page }} > 1){
                  url = '/todos/list/{{active_list.id}}?page={{ pagination.page - 1 }}';
                }
                
                window.location.replace(url);
              });
            };
          }

        </script>
   

{% endblock %}